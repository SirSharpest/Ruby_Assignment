#+TITLE: Assignment 1
#+AUTHOR: Nathan Hughes ([[mailto:nah31@aber.ac.uk][nah26@aber.ac.uk]])
#+OPTIONS: toc:nil
#+LaTeX_CLASS: article
#+LaTeX_CLASS_OPTIONS: [a4paper]
#+LaTeX_HEADER: \usepackage[margin=0.8in]{geometry}
#+LaTeX_HEADER: \usepackage{amssymb,amsmath}
#+LaTeX_HEADER: \usepackage{fancyhdr} %For headers and footers
#+LaTeX_HEADER: \pagestyle{fancy} %For headers and footers
#+LaTeX_HEADER: \usepackage{lastpage} %For getting page x of y
#+LaTeX_HEADER: \usepackage{float} %Allows the figures to be positioned and formatted nicely
#+LaTeX_HEADER: \restylefloat{figure} %and this command
#+LaTeX_HEADER: \usepackage{hyperref}
#+LaTeX_HEADER: \hypersetup{urlcolor=blue}
#+LaTeX_HEADER: \usepackage{minted}
#+LATEX_HEADER: \setminted{frame=single,framesep=10pt}
#+LaTeX_HEADER: \chead{}
#+LaTeX_HEADER: \rhead{\today}
#+LaTeX_HEADER: \cfoot{}
#+LaTeX_HEADER: \rfoot{\thepage\ of \pageref{LastPage}}
#+LaTeX_HEADER: \usepackage[parfill]{parskip}
#+LaTeX_HEADER:\usepackage{subfig}
#+latex_header: \hypersetup{colorlinks=true,linkcolor=black}
#+LATEX_HEADER_EXTRA:  \usepackage{framed}

#+LATEX_HEADER: \AtBeginEnvironment{minted}{%
#+LATEX_HEADER:  \renewcommand{\fcolorbox}[4][]{#4}}


\vspace{2cm}

#+BEGIN_CENTER
#+ATTR_LATEX: :width 4cm 
[[./ruby.png]]
#+END_CENTER

#+LATEX: \clearpage
#+LATEX: \tableofcontents
#+LATEX: \clearpage


* Introduction 
   
* CSA Architecture 

** TODO User creation
- Command ran
- File outputs
- Diagram of files made
** TODO Post creation
- Command ran
- File outputs
- Diagram of files made

** Routes 
#+CAPTION: x
#+BEGIN_SRC RUBY
Rails.application.routes.draw do
  resources :users
  resources :posts

  root 'posts#index'
  # Send errors to root
  get '*path' => redirect('/')

end
#+END_SRC

** Navigation
#+CAPTION: x
#+BEGIN_SRC RUBY
    primary.item :home, 'Home', '/home', highlights_on: /(^\/$)|(^\/home$)/
    primary.item :jobs, 'Jobs', '/jobs'
    primary.item :profile, 'Profile', '/profile', if: Proc.new { is_admin? }
    primary.item :users, 'Users', users_path, if: Proc.new { is_admin? }
    primary.item :broadcasts, 'Broadcasts', '/broadcasts', if: Proc.new { is_admin? }
#+END_SRC

** Application Controller
#+CAPTION: x
#+BEGIN_SRC RUBY
  # Make is_admin? a helper method available to view templates
  helper_method :is_admin?

  protected

  # Is the caller an admin user? Currently everyone is!
  # @return true if admin user else false
  def is_admin?
    true
  end
#+END_SRC

** Layout.scss
#+CAPTION: x
#+BEGIN_SRC CSS
.navigation {
  a {
    color: #aa1111;
    text-decoration: none;
    font-weight: bold;
    margin: 0;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .selected {
    background-color: #C5F1F9;
  }
  a:hover,
  a:active,
  a.here:link,
  a.here:visited {
    color: #C811D8;
  }
#+END_SRC



* TODO MVC Model 
  
** TODO UML Diagram
*** Database
#+NAME: fig:uml
#+begin_src plantuml :results file :file posts-users.png
class Posts{
  +title :string
  +body :string
}

class Users{
  +surname :string
  +forename :string
  +phone :string
  +email :string
  +grad_year :integer
  +jobs :boolean
}

Posts "*" -- "0..1" Users

#+end_src

#+BEGIN_CENTER
#+CAPTION: Posts and Users UML
#+ATTR_LATEX: :width 4cm
#+RESULTS: fig:uml
#+END_CENTER

*** TODO What is the Model-2 Variant
** TODO Models
** TODO Views
** TODO Controls

   
* Database

** TODO Database location

** TODO Migration Files
#+BEGIN_SRC BASH
rails db:migrate
#+END_SRC 
